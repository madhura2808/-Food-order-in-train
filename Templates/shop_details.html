{% extends 'Admin-Dashboard.html' %}
{% block main %}
<!-- MAIN -->
<main>
    <div class="hed">
        <h3>Shop Information</h3>
    </div>

    <!-- Add Button -->
    <div class="add-button-container mt-3">
        <button class="btn-add" onclick="showPopup('popup-form')">Add Shop</button>
    </div>

    <!-- Add Shop Popup Form -->
    <div id="popup-form" class="popup-form">
        <div class="popup-content">
            <h2>Add Shop</h2>
            <span class="close-btn" onclick="hidePopup('popup-form')">&times;</span>
            <form method="POST" action="/add_shop">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>

                <label for="username">Username:</label>
                <input type="text" id="username" name="username" required>

                <label for="shop-name">Shop Name:</label>
                <input type="text" id="shop-name" name="shop_name" required>

                <label for="address">Address:</label>
                <input type="text" id="address" name="address" required>
                
                <button type="submit" class="submit-btn">Add</button>
            </form>
        </div>
    </div>

    <!-- Update Shop Popup Form -->
    <div id="update-popup-form" class="popup-form">
        <div class="popup-content">
            <h2>Update Shop</h2>
            <span class="close-btn" onclick="hidePopup('update-popup-form')">&times;</span>
            <form method="POST" action="/update_shop">
                <input type="hidden" id="update-shop-id" name="shop_id">
                
                <label for="update-name">Name:</label>
                <input type="text" id="update-name" name="name" required>

                <label for="update-username">Username:</label>
                <input type="text" id="update-username" name="username" required>

                <label for="update-shop-name">Shop Name:</label>
                <input type="text" id="update-shop-name" name="shop_name" required>

                <label for="update-address">Address:</label>
                <input type="text" id="update-address" name="address" required>
                
                <button type="submit" class="submit-upbtn">Update</button>
            </form>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Username</th>
                <th>Shop Name</th>
                <th>Address</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for shop in shop %}
            <tr>
                <td>{{ shop[1] }}</td>
                <td>{{ shop[2] }}</td>
                <td>{{ shop[3] }}</td>
                <td>{{ shop[4] }}</td>
                <td>
                    <button type="button" class="update-btn" onclick="showUpdatePopup('{{ shop[0] }}', '{{ shop[1] }}', '{{ shop[2] }}', '{{ shop[3] }}', '{{ shop[4] }}')">Update</button>
                    <form action="/delete_shop" method="POST" style="display:inline;">
                        <input type="hidden" name="shop_id" value="{{ shop[0] }}">
                        <button type="submit" class="delete-btn">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</main>
<!-- MAIN -->
{% endblock main %}